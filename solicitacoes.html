<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="descrição">
  <meta name="keywords" content="palavras-chave" />
  <title>APCVC - Gestão de Solicitações</title>
  <link href="css/root.css" rel="stylesheet">
  <link rel="stylesheet" href="//cdn.datatables.net/2.0.8/css/dataTables.dataTables.min.css">  
  <script src="node_modules/jspdf/dist/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <div class="loading"><img src="img/loading.gif" alt="imagem de carregamento"></div>
  <div id="top" class="clearfix">
    <div class="applogo">
      <a href="#" class="logo">APCVC</a>
    </div>
    <a href="#" class="sidebar-open-button"><i class="fa fa-bars"></i></a>
    <a href="#" class="sidebar-open-button-mobile"><i class="fa fa-bars"></i></a>
    <ul class="top-right">
      <li class="dropdown link">
        <a href="#" data-toggle="dropdown" class="dropdown-toggle hdbutton">Criar Novo <span class="caret"></span></a>
        <ul class="dropdown-menu dropdown-menu-list" id="quick-menu"></ul>
      </li>
      <li class="dropdown link" id="profile-box"></li>
    </ul>
  </div>
  <div class="sidebar sidebar-colorful clearfix" id="sidebar"></div>
  <div class="content">
    <div class="page-header">
      <h1 class="title">Solicitações</h1>
      <ol class="breadcrumb" id="breadcrumb"></ol>
      <div class="right">
        <div class="btn-group" role="group" aria-label="..." id="breadcrumb-buttons">
        </div>
      </div>
    </div>
    <div class="container-default">
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-title">Listagem de Solicitações</div>
            <div class="panel-body table-responsive">
              <table id="solicitacoesTable" class="table display dataTable no-footer">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>PA ID</th>
                    <th>Estado</th>
                    <th>Quantidade</th>
                    <th>Data de Movimentação</th>
                    <th>Data de Entrega</th>
                    <th>Funcionario</th>
                    <th>Cliente</th>
                    <th></th>
                    <th></th>
                    <th></th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="row footer">
      <div class="col-md-6 text-left">
        Copyright © 2024 <a href="https://apcvc.pt/" target="_blank">APCVC</a> - Todos os direitos reservados.
      </div>
      <div class="col-md-6 text-right">
        Design e Desenvolvimento por <a href="https://nunomansilhas.pt" target="_blank">Nuno Mansilhas</a>
      </div>
    </div>
  </div>
  <!-- Modal for solicitacao details -->
  <div class="modal fade" id="solicitacaoDetalhesModal" tabindex="-1" role="dialog" aria-labelledby="solicitacaoDetalhesModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="solicitacaoDetalhesModalLabel">Detalhes da Solicitação</h4>
        </div>
        <div class="modal-body">
          <div id="solicitacaoDetalhesContent"></div>
        </div>
        <div class="modal-footer">
          <button id="deleteSolicitacaoBtn" class="btn btn-danger"><i class="fa fa-trash-o"></i> Eliminar </button>
          <button id="prolongarDataBtn" class="btn btn-warning" style="display: none;"><i class="fa fa-calendar-plus-o"></i> Prolongar Data</button>
          <button id="printDeclSolicitacaoBtn" class="btn btn-default"><i class="fa fa-file-o"></i> Gerar Declaração</button>
        </div>
      </div>
    </div>
  </div>

  <script src="js/jquery.min.js"></script>
  <script src="js/bootstrap/bootstrap.min.js"></script>
  <script src="js/plugins.js"></script>
  <script src="js/bootstrap-select/bootstrap-select.js"></script>
  <script src="js/bootstrap-toggle/bootstrap-toggle.min.js"></script>
  <script src="js/bootstrap-wysihtml5/wysihtml5-0.3.0.min.js"></script>
  <script src="js/bootstrap-wysihtml5/bootstrap-wysihtml5.js"></script>
  <script src="js/sweet-alert/sweet-alert.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
  <script src="js/jquery-ui/jquery-ui.min.js"></script>
  <script src="js/moment/moment.min.js"></script>
  <script src="js/date-range-picker/daterangepicker.js"></script>
  
  <script src="scripts/menu/breadcrumb.js"></script>
  <script src="scripts/menu/quickmenu.js"></script>
  <script src="scripts/menu/sidebar.js"></script>
  <script src="scripts/menu/profile.js"></script>
  
  <script src="js/kode-alert/main.js"></script>
  <script src="js/datatables/dataTables.bootstrap5.min.js"></script>
  <script src="js/datatables/datatables.min.js"></script>
 

  <script type="module" src="scripts/solicitacoes/get-data-solicitacoes.js"></script>
  <script type="module">
    import { showSolicitacaoDetalhesModal } from './scripts/solicitacoes/solicitacao-detalhes.js';

    document.addEventListener('DOMContentLoaded', function() {
      const params = new URLSearchParams(window.location.search);
      const movimentacaoID = params.get('movimentacaoID');
      if (movimentacaoID) {
        showSolicitacaoDetalhesModal(movimentacaoID);
      }
    });
  </script>
</body>
</html>
